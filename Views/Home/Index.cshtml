@{
    ViewData["Title"] = "Home Page";
}

<script src="https://accounts.google.com/gsi/client" async defer></script>
<script type="text/javascript">
    function loginWithGoogle() {
        console.log('Login button clicked')
    }

    function handleCredentialResponse(response) {
        // Google returns a JSON Web Token (JWT) credential
        const data = jwtDecode(response.credential);
        console.log("ID: " + data.sub); // Unique Google ID
        console.log('Full Name: ' + data.name);
        console.log('Email: ' + data.email);

        // Here, you would typically send the 'response.credential' JWT to your backend server
        // for secure validation and actual user session management.
    }

    // A simple function to decode the JWT for demonstration purposes in the frontend
    // In a real application, token validation should be done on the server.
    function jwtDecode (token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        return JSON.parse(jsonPayload);
    };
</script>

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <!-- <button onclick="loginWithGoogle();">Login</button> -->

    <div id="g_id_onload"
         data-client_id="935891679520-ur0sfnqsi9kchrtlhtmefdnsqup9771s.apps.googleusercontent.com"
         data-callback="handleCredentialResponse"
         data-auto_prompt="false">
    </div>

    <!-- Step 2c: Place the Sign In With Google button -->
    <div class="g_id_signin"
         data-type="standard"
         data-size="large"
         data-theme="outline"
         data-text="sign_in_with"
         data-shape="rectangular"
         data-logo_alignment="left">
    </div>

    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>
